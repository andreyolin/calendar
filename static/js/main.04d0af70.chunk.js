(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(9),o=n.n(r),i=(n(14),n(15),n(3)),d=n(7),s=n.n(d),l=n(1),u=n.n(l),j=n(5),b={get:function(){return JSON.parse(localStorage.getItem("events")||"[]")},post:function(e){var t=b.get();localStorage.setItem("events",JSON.stringify([].concat(Object(j.a)(t),[e])))},delete:function(e){var t=b.get().filter((function(t){return t.id!==e}));localStorage.setItem("events",JSON.stringify([t]))},patch:function(e){var t=b.get(),n=t.find((function(t){return e.id===t.id})),c=t.filter((function(e){return e.id!==(null===n||void 0===n?void 0:n.id)}));localStorage.setItem("events",JSON.stringify([].concat(Object(j.a)(c),[e])))}};function m(){return b.get()}var v=n(0),f=function(e){var t=e.day,n=e.currentMonth,c=e.onSetCurrentEvent,a=e.onSetFormIsShowing,r=t.numberOfDay,o=t.dayOfWeek,i=t.month,d=m().filter((function(e){return t.id===e.dayId}));return Object(v.jsxs)("div",{className:"cell__content",children:[Object(v.jsxs)("div",{className:s()("cell__description",{"cell__description--grey":Number(i)!==n}),children:[Object(v.jsx)("p",{children:r}),Object(v.jsx)("p",{children:o})]}),Object(v.jsx)("div",{className:"cell__content__events",children:d.map((function(e){return Object(v.jsx)("span",{onClick:function(){a(!0),c(e)},children:e.title},e.id)}))})]})},_=function(e){var t=e.onSetFormIsShowing,n=e.choosenDay,a=e.currentEvent,r=Object(c.useState)(""),o=Object(i.a)(r,2),d=o[0],s=o[1],l=Object(c.useState)(""),f=Object(i.a)(l,2),_=f[0],h=f[1],O=Object(c.useState)(null===n||void 0===n?void 0:n.date),p=Object(i.a)(O,2),x=p[0],y=p[1],N=Object(c.useState)(""),g=Object(i.a)(N,2),S=g[0],Y=g[1];return Object(c.useEffect)((function(){a&&(s(a.title),a.description&&h(a.description),a.time&&Y(a.time),y(a.date))}),[n]),Object(v.jsxs)("form",{className:"eventForm",children:[Object(v.jsxs)("div",{className:"eventForm__title",children:[Object(v.jsx)("h2",{className:"eventForm__text",children:"Add new event"}),Object(v.jsx)("button",{className:"eventForm__title__button",type:"button",onClick:function(){return t(!1)},children:"X"})]}),Object(v.jsx)("h3",{children:"Title*"}),a&&(a.createdAt?Object(v.jsx)("p",{children:"Created at ".concat(null===a||void 0===a?void 0:a.createdAt)}):Object(v.jsx)("p",{children:"Updated at ".concat(null===a||void 0===a?void 0:a.updatedAt)})),Object(v.jsx)("input",{className:"eventForm__titleInput",required:!0,type:"text",placeholder:"Title goes here",value:d,onChange:function(e){return s(e.target.value)}}),Object(v.jsx)("input",{type:"text",className:"eventForm__descriptionInput",placeholder:"description",value:_,onChange:function(e){return h(e.target.value)}}),Object(v.jsxs)("div",{className:"eventForm__dateInputs",children:[Object(v.jsx)("input",{type:"date",required:!0,value:x,onChange:function(e){return y(e.target.value)}}),Object(v.jsx)("input",{type:"time",value:S,onChange:function(e){return Y(e.target.value)}})]}),Object(v.jsx)("button",{className:"eventForm__saveButton",type:"submit",disabled:!d||!x,onClick:function(){var e,c,r=m(),o=Math.max.apply(Math,Object(j.a)(r.map((function(e){return Number(e.id)})))),i={createdAt:u()().format("HH:mm DD MMMM YYYY"),id:o,dayId:null===n||void 0===n?void 0:n.id,title:d,description:_,date:x,time:S};a?(e={updatedAt:u()().format("HH:mm DD MMMM YYYY"),id:null===a||void 0===a?void 0:a.id,title:d,date:x,time:S,dayId:null===n||void 0===n?void 0:n.id,description:_},b.patch(e)):(c=i,b.post(c)),t(!1)},children:"Save"}),a&&Object(v.jsx)("button",{type:"submit",onClick:function(e){var n;n=null===a||void 0===a?void 0:a.id,b.delete(n),t(!1),null===e||void 0===e||e.preventDefault()},children:"Delete"})]})},h=function(){var e=Object(c.useState)(Number(u()().format("YYYY"))),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(Number(u()().format("M"))),o=Object(i.a)(r,2),d=o[0],l=o[1],j=Object(c.useState)(null),b=Object(i.a)(j,2),m=b[0],h=b[1],O=Object(c.useState)(!1),p=Object(i.a)(O,2),x=p[0],y=p[1],N=Object(c.useState)(),g=Object(i.a)(N,2),S=g[0],Y=g[1],M=u()("".concat(n,"-").concat(d,"-01")).format("D");u.a.updateLocale("en",{week:{dow:1}});var C=u()("".concat(n,"-").concat(d,"-").concat(M)).startOf("month").startOf("week"),D=function(e){for(var t=[],n=1,c=e.clone();n<=42;)t.push(c.clone()),c.add(1,"day"),n+=1;return t.map((function(e){return{id:u()(e).format("D")+u()(e).format("M")+u()(e).format("YYYY"),date:"".concat(u()(e).format("YYYY"),"-").concat(u()(e).format("MM"),"-").concat(u()(e).format("DD")),numberOfDay:u()(e).format("D"),dayOfWeek:u()(e).format("dd"),month:u()(e).format("M"),year:u()(e).format("YYYY")}}))}(u()(C));return Object(v.jsxs)("div",{className:"calendar",children:[Object(v.jsxs)("div",{className:"calendar__header",children:[Object(v.jsxs)("div",{className:"calendar__header__form",children:[Object(v.jsx)("button",{className:"calendar__header__form__button",type:"button",disabled:!m,onClick:function(){Y(void 0),y(!x)},children:"+"}),!m&&Object(v.jsx)("p",{children:"Please Choose a day to add event"})]}),Object(v.jsxs)("div",{className:"calendar__header__nav",children:[Object(v.jsxs)("div",{className:"calendar__header__nav__chooser",children:[Object(v.jsx)("button",{className:"calendar__header__nav__chooser__button",type:"button",onClick:function(){1===d?(l(12),a((function(e){return e-1}))):l((function(e){return e-1}))},children:"<"}),Object(v.jsx)("p",{children:"".concat(u()("".concat(n,"-").concat(d,"-1")).format("MMMM")," ").concat(n)}),Object(v.jsx)("button",{className:"calendar__header__nav__chooser__button",type:"button",onClick:function(){12===d?(l(1),a((function(e){return e+1}))):l((function(e){return e+1}))},children:">"})]}),Object(v.jsx)("input",{className:"calendar__header__nav__date",type:"date",value:"",onChange:function(e){var t=e.target.value.split("-"),n=t.map((function(e){return Number(e)})).reverse().join(""),c=D.find((function(e){return e.id===n}))||null;a(Number(t[0])),l(Number(t[1])),h(c)}})]})]}),Object(v.jsxs)("div",{className:"calendar__body",children:[x&&Object(v.jsx)(_,{currentEvent:S,choosenDay:m,onSetFormIsShowing:y}),D.map((function(e){return Object(v.jsx)("button",{type:"button",className:s()("cell",{cell__isCurrent:(t=e,u()().format("YYYY M D")==="".concat(t.year," ").concat(t.month," ").concat(t.numberOfDay))},{cell__isActive:(null===m||void 0===m?void 0:m.id)===e.id},{cell__isNotCurrentMonth:Number(e.month)!==d}),onClick:function(){h(e),x&&y(!1)},children:Object(v.jsx)(f,{onSetFormIsShowing:y,onSetCurrentEvent:Y,day:e,currentMonth:d})},e.id);var t}))]})]})},O=function(){return Object(v.jsx)(h,{})};o.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(O,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.04d0af70.chunk.js.map